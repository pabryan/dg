\usepackage[utf8]{inputenc}
\usepackage{graphicx}
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{amstext}
\usepackage{hyperref}

\usepackage{ifthen}

% Layout
\usepackage[a4paper,margin=1.5cm,rmargin=1.5cm,includehead]{geometry}
\usepackage{fancyhdr}
\pagestyle{fancy}
\setlength{\headheight}{36.0pt}
\lhead{\large\sc Differential Geometry Week \weeknum \\ \topic}
\rhead{\thepage}
\cfoot{}
\usepackage{parskip}

% Macros
\let\oldforall\forall
\renewcommand{\forall}{\oldforall \, }

\let\oldexist\exists
\renewcommand{\exists}{\oldexist \: }

\newcommand{\RR}{\mathbb{R}}
\newcommand{\CC}{\mathbb{C}}
\renewcommand{\SS}{\mathbb{S}}
\newcommand{\NN}{\mathbb{N}}
\newcommand{\ZZ}{\mathbb{Z}}
\newcommand{\Ric}{\operatorname{Ric}}
\newcommand{\Tr}{\operatorname{Tr}}
\newcommand{\Img}{\operatorname{Img}}
\newcommand{\Id}{\operatorname{Id}}
\newcommand{\avgint}{\mathop{\mathchoice{\,\rlap{-}\!\!\int}{\rlap{\raise.15em{\scriptstyle -}}\kern-.2em\int}{\rlap{\raise.09em{\scriptscriptstyle -}}\!\int}{\rlap{-}\!\int}}\nolimits}
\newcommand{\abs}[1]{\left\lvert{#1}\right\rvert}

% Hack to fix for some weird plotly error
\DeclareUnicodeCharacter{2212}{\ensuremath{-}}

% Boxed environments
\usepackage[many]{tcolorbox}
\usepackage{xcolor}

\colorlet{cboxcoltext}{black}
\colorlet{cboxcoltitle}{white}
\colorlet{cboxtitletext}{black}
\colorlet{cboxcolframe}{black}

\definecolor{thmcolor}{HTML}{800000}
\definecolor{egcolor}{HTML}{00802b}
\definecolor{defncolor}{HTML}{0059b3}
\definecolor{lemcolor}{HTML}{800000}
\definecolor{corcolor}{HTML}{800000}
\definecolor{pfcolor}{HTML}{800000}
\definecolor{remcolor}{HTML}{0059b3}
\definecolor{excolor}{HTML}{5c0099}
\colorlet{cboxcolback}{white}

\newtcolorbox{cbox}[2][]{
  toptitle=1ex,
  before skip=1em,
  after skip=1em,
  before upper={\setlength{\parskip}{0.2em}},
  bottomtitle=1ex,
  colback=cboxcolback,
  colframe=cboxcolframe,
  colbacktitle=#2,
  coltext=cboxcoltext,
  coltitle=cboxcoltitle,
  title={#1}
}

% Theorems
\newenvironment{thmbox}[3][\empty]
{\begin{cbox}[{#2}\ifthenelse{\equal{#1}{}}{}{: {#1}}]{#3}}
{\end{cbox}}
\newenvironment{thm}[1][\empty]
{\begin{thmbox}[{#1}]{Theorem}{thmcolor}}
{\end{thmbox}}
\newenvironment{eg}[1][\empty]
{\begin{thmbox}[{#1}]{Example}{egcolor}}
{\end{thmbox}}
\newenvironment{defn}[1][\empty]
{\begin{thmbox}[{#1}]{Definition}{defncolor}}
{\end{thmbox}}
\newenvironment{lem}[1][\empty]
{\begin{thmbox}[{#1}]{Lemma}{lemcolor}}
{\end{thmbox}}
\newenvironment{cor}[1][\empty]
{\begin{thmbox}[{#1}]{Corollary}{corcolor}}
{\end{thmbox}}
\newenvironment{pf}[1][\empty]
{\begin{thmbox}[{#1}]{Proof}{pfcolor}}
{\end{thmbox}}
\newenvironment{rem}[1][\empty]
{\begin{thmbox}[{#1}]{Remark}{remcolor}}
{\end{thmbox}}
\newenvironment{ex}[1][\empty]
{\begin{thmbox}[{#1}]{Exercise}{excolor}}
{\end{thmbox}}
